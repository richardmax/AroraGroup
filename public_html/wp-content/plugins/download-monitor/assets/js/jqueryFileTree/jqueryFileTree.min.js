// jQuery File Tree Plugin
//
// Version 1.01
//
// Cory S.N. LaViska
// A Beautiful Site (http://abeautifulsite.net/)
// 24 March 2008
//
// Visit http://abeautifulsite.net/notebook.php?article=58 for more information
//
// Usage: $('.fileTreeDemo').fileTree( options, callback )
//
// Options:  root           - root folder to display; default = /
//           script         - location of the serverside AJAX file to use; default = jqueryFileTree.php
//           folderEvent    - event to trigger expand/collapse; default = click
//           expandSpeed    - default = 500 (ms); use -1 for no animation
//           collapseSpeed  - default = 500 (ms); use -1 for no animation
//           expandEasing   - easing function to use on expand (optional)
//           collapseEasing - easing function to use on collapse (optional)
//           multiFolder    - whether or not to limit the browser to one subfolder at a time
//           loadMessage    - Message to display while initial tree loads (can be HTML)
//
// History:
//
// 1.01 - updated to work with foreign characters in directory/file names (12 April 2008)
// 1.00 - released (24 March 2008)
//
// TERMS OF USE
// 
// This plugin is dual-licensed under the GNU General Public License and the MIT License and
// is copyright 2008 A Beautiful Site, LLC. 
//
jQuery&&function(e){e.extend(e.fn,{fileTree:function(t,n){if(!t)var t={};t.root==undefined&&(t.root="/");t.script==undefined&&(t.script="jqueryFileTree.php");t.folderEvent==undefined&&(t.folderEvent="click");t.expandSpeed==undefined&&(t.expandSpeed=500);t.collapseSpeed==undefined&&(t.collapseSpeed=500);t.expandEasing==undefined&&(t.expandEasing=null);t.collapseEasing==undefined&&(t.collapseEasing=null);t.multiFolder==undefined&&(t.multiFolder=!0);t.loadMessage==undefined&&(t.loadMessage="Loading...");e(this).each(function(){function r(n,r){e(n).addClass("wait");e(".jqueryFileTree.start").remove();e.post(t.script,{dir:r},function(s){e(n).find(".start").html("");e(n).removeClass("wait").append(s);t.root==r?e(n).find("UL:hidden").show():e(n).find("UL:hidden").slideDown({duration:t.expandSpeed,easing:t.expandEasing});i(n)})}function i(i){e(i).find("LI A").bind(t.folderEvent,function(){if(e(this).parent().hasClass("directory"))if(e(this).parent().hasClass("collapsed")){if(!t.multiFolder){e(this).parent().parent().find("UL").slideUp({duration:t.collapseSpeed,easing:t.collapseEasing});e(this).parent().parent().find("LI.directory").removeClass("expanded").addClass("collapsed")}e(this).parent().find("UL").remove();r(e(this).parent(),escape(e(this).attr("rel").match(/.*\//)));e(this).parent().removeClass("collapsed").addClass("expanded")}else{e(this).parent().find("UL").slideUp({duration:t.collapseSpeed,easing:t.collapseEasing});e(this).parent().removeClass("expanded").addClass("collapsed")}else n(e(this).attr("rel"));return!1});t.folderEvent.toLowerCase!="click"&&e(i).find("LI A").bind("click",function(){return!1})}e(this).html('<ul class="jqueryFileTree start"><li class="wait">'+t.loadMessage+"<li></ul>");r(e(this),escape(t.root))})}})}(jQuery);